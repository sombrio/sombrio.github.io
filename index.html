<!DOCTYPE html>
<html>
  <head>
    <!-- import jquery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    
    
    <script>
      function toHexString(byteArray, joinChar) {
        return Array.from(byteArray, function(byte) {
          return ('0' + (byte & 0xFF).toString(16)).slice(-2);
        }).join(joinChar)
      }
      
      var openFile = function (event) {
        var input = event.target;

        var reader = new FileReader();
        
        reader.onload = function () {
          var edidBuffer = new Uint8Array(reader.result);
          
          // set to output
          $("#output").text(toHexString(edidBuffer, ''));

          // core builder
          $('#out_table_head').empty();
          $('#out_table_body').empty();
          var htmlStr = '';

          // header
          htmlStr = '<tr><td>Bytes</td><td>Description</td></tr><tr><td>0-19</td><td>Header information</td></tr>';
          $('#out_table_head').append(htmlStr);

          htmlStr = abccc(edidBuffer.slice(0, 20));
          $('#out_table_body').append(htmlStr);
        
        
        };
        // reader.readAsText(input.files[0]);
        reader.readAsArrayBuffer(input.files[0]);
      };
    </script>

    <!-- Simple Header Parser -->
    <script>
    
      // parse Header Information (bytes 0 ~ byte 19)
      var abccc = function(edid) {
        var buildStr = '';
        var manufacturerID = '';
        
        // manufacturer ID: big-endian 16-bit value made up of three 5-bit letters
        //       0xxx xxyy yyyz zzzz
        // mask:    7    c    0    0
        //          0    3    E    0
        //          0    0    1    F
        manufacturerID += String.fromCharCode(((((edid[8] << 8) + edid[9]) & 0x7c00) >> 10) + 0x40);
        manufacturerID += String.fromCharCode(((((edid[8] << 8) + edid[9]) & 0x03E0) >> 5) + 0x40);
        manufacturerID += String.fromCharCode((edid[9] & 0x001F) + 0x40);
        buildStr += '<tr><td> 0 -  7 </td><td>' + toHexString(edid.slice(0, 8), ' ') + '</td></tr>';
        buildStr += '<tr><td> 8 -  9 </td><td>' + manufacturerID + '</td></tr>';
        buildStr += '<tr><td>10 - 11 </td><td>' + toHexString(edid.slice(10, 12), ' ') + '</td></tr>';
        buildStr += '<tr><td>12 - 15 </td><td>' + toHexString(edid.slice(12, 16), ' ') + '</td></tr>';
        buildStr += '<tr><td>16 - 16 </td><td>' + toHexString(edid.slice(16, 17), ' ') + '</td></tr>';
        buildStr += '<tr><td>17 - 17 </td><td>' + toHexString(edid.slice(17, 18), ' ') + '</td></tr>';
        buildStr += '<tr><td>18 - 19 </td><td>' + toHexString(edid.slice(18, 20), ' ') + '</td></tr>';
        
        return buildStr;
      }

    </script>

    <!-- common utils -->
    <script>
      const alpha = [ 'A', 'B', 'C', 'D', 'E',
      'F', 'G', 'H', 'I', 'J',
      'K', 'L', 'M', 'N', 'O',
      'P', 'Q', 'R', 'S', 'T',
      'U', 'V', 'W', 'X', 'Y', 'Z' ];

      // convert ArrayBuffer to HexString
      var buf2hex = function(buffer) { // buffer is an ArrayBuffer
        return Array.prototype.map.call(new Uint8Array(buffer), x => ('00' + x.toString(16)).slice(-2)).join('');
      }

      
      // hexchar to binarystring
      // sample: 
      var hex2bin = function(hex) {
        return (parseInt(hex, 16).toString(2)).padStart(hex.length * 4, '0');
      }

      
      // binString to ascii
      var binaryToChar = function (binary) {
        return alpha[parseInt(binary, 2)];
      }
    </script>
  </head>
  <body>
    <input type="file" accept=".bin" onchange="openFile(event)" /><br />
    <div id="output"></div>
    <div id="out_table">
      <table>
        <thead id="out_table_head"></thead>
        <tbody id="out_table_body"></tbody>
      </table>
    </div>
  </body>
</html>
